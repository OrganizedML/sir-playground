(this["webpackJsonpsir-spa"]=this["webpackJsonpsir-spa"]||[]).push([[0],{101:function(e,t,i){e.exports=i.p+"static/media/icons8-business-buildings.d40fc481.svg"},102:function(e,t,i){e.exports=i.p+"static/media/icons8-organization.4b917871.svg"},103:function(e,t,i){e.exports=i.p+"static/media/icons8-manufacturing.6a1458e1.svg"},104:function(e,t,i){e.exports=i.p+"static/media/icons8-park-with-street-light.9024a2d1.svg"},122:function(e,t,i){e.exports=i(247)},127:function(e,t,i){},247:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),s=i(32),r=i.n(s),o=(i(127),i(30)),l=i(50),h=i(16),c=i(74),u=i.n(c),d=i(99),f=i(21),_=i(22),p=i(23),m=i(38),g=i(39),v=function(){function e(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(_.a)(this,e),this.unique_id=t,this.position=i,this.now_in_center=a,this.model=n,this.home=s,this.has_infected=r,this.dx=2*(Math.random()-.5),this.dy=2*(Math.random()-.5)}return Object(p.a)(e,[{key:"move",value:function(){if("random"===this.model.movement){var e=this.model.space.get_neighborhood_empty(this.position);e.push(this.position);var t=(i=e)[Math.floor(Math.random()*i.length)]}else this.model.movement;var i;this.position=t,this.model.space.move_agent(this,t)}},{key:"hotspot_move",value:function(){var e=this.model.space.get_potential_force(this);e=y(e);var t,i,n=this.model.schedule_random_activity[this.model.current_mode],a=this.model.schedule_speed[this.model.current_mode];t="Infected"==this.className,i=this.model.stay_at_home,t&&i?(n=0,a=.5):this.model.stronger_repulsion?n=0:this.model.exit_lock&&(n=0,a*=.5),e[0]+=this.dx+n*(Math.random()-.5)*2,e[1]+=this.dy+n*(Math.random()-.5)*2,e=y(e),this.dx=e[0],this.dy=e[1];var s=[this.position[0]+this.dx*a,this.position[1]+this.dy*a];s=this.model.space.correct_boundaries(s),this.position=s,this.model.space.move_agent(this,this.position)}},{key:"spread_infection",value:function(){var e,t=this.model.space.get_agents_inRange(this,this.model.infection_radius),i=Object(f.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,a=this.model.s_list.filter((function(e,t,i){return e.unique_id===n}))[0];"undefined"!==typeof a&&"Susceptible"==a.className&&0==a.infected&&Math.random()<this.model.infection_probability_onContact&&(a.infected=!0,this.has_infected+=1)}}catch(s){i.e(s)}finally{i.f()}}}]),e}();function y(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return t<.01?[0,0]:[e[0]/t,e[1]/t]}var b=function(e){Object(g.a)(i,e);var t=Object(m.a)(i);function i(e,n,a){var s,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(_.a)(this,i),(s=t.call(this,e,n,a,r,o,c)).infected=l,s.steps_since_infection=h,s.className="Susceptible",s.duration=s.model.duration_mean+w(-1,1),s}return Object(p.a)(i,[{key:"step",value:function(){var e=-1,t=-1;return this.infected&&this.steps_since_infection>this.model.steps_till_symptoms?Math.floor(this.steps_since_infection/this.model.steps_each_day)>this.duration?t=this.unique_id:Math.random()<this.model.infection_recoginition_probability?e=this.unique_id:(this.spread_infection(),this.hotspot_move(),this.spread_infection(),this.steps_since_infection+=1):this.infected&&(this.steps_since_infection+=1),this.hotspot_move(),[t,e]}}]),i}(v);function w(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var k=function(e){Object(g.a)(i,e);var t=Object(m.a)(i);function i(e,n,a){var s,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],arguments.length>7&&void 0!==arguments[7]?arguments[7]:0);return Object(_.a)(this,i),(s=t.call(this,e,n,a,r,o,l)).className="Removed",s}return Object(p.a)(i,[{key:"step",value:function(){this.hotspot_move()}}]),i}(v),j=function(e){Object(g.a)(i,e);var t=Object(m.a)(i);function i(e,n,a){var s,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return Object(_.a)(this,i),(s=t.call(this,e,n,a,r,o,h)).infected=!0,s.steps_since_infection=l,s.className="Infected",s.duration=s.model.duration_mean+E(-1,1),s}return Object(p.a)(i,[{key:"step",value:function(){var e=-1;return Math.floor(this.steps_since_infection/this.model.steps_each_day)>this.duration?e=this.unique_id:(this.spread_infection(),this.hotspot_move(),this.spread_infection(),this.steps_since_infection+=1),e}}]),i}(v);function E(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var O=function(){function e(t,i){var n=this;Object(_.a)(this,e),this.width=t,this.height=i,this.agent_size=1,this.agent_list=[],this.lc=Object(o.a)(Array(this.height)).map((function(e){return Array(n.width).fill(-1)})),this.ll=new Array,this.ll[0]=[-1,-1,[0,0]],this.home_multiplier=.75,this.work_multiplier=1,this.repulsion_force_multiplier=2,this.attractive_points=new Array,this.load_world_layout("work")}return Object(p.a)(e,[{key:"load_world_layout",value:function(e){"work"==e&&(this.add_attraction_at([Math.floor(this.width/5),Math.floor(4*this.height/5)],this.work_multiplier,["work"],-1,1),this.add_attraction_at([Math.floor(4*this.width/5),Math.floor(this.height/5)],this.work_multiplier,["work"],-1,2),this.add_attraction_at([Math.floor(2*this.width/5),Math.floor(this.height/5)],this.work_multiplier,["work"],-1,3),this.add_attraction_at([Math.floor(4*this.width/5),Math.floor(1*this.height/2)],this.work_multiplier,["morning","afterwork"],20,-1,"park"))}},{key:"add_attraction_at",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"default";this.attractive_points.push([e,t,i,n,a,s])}},{key:"get_local_repulsion_positions",value:function(e){if(e.length>0){var t,i=new Array,n=this.agent_list.filter((function(t){return e.includes(t[0])})),a=Object(f.a)(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;i.push(s[1])}}catch(r){a.e(r)}finally{a.f()}return i}return[]}},{key:"get_potential_force",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=0,s=0,r=0,o=0,l=this.inRange_linked_cell(e.position,e.unique_id,e.model.repulsion_range),h=this.get_local_repulsion_positions(l),c=this.agent_list.filter((function(t){return t[0]==e.unique_id}))[0],u=Object(f.a)(h);try{for(u.s();!(t=u.n()).done;){var d=t.value,_=M(e.position,d),p=this.repulsion_force_multiplier/Math.pow(_,2)*(1/_-1/(e.model.repulsion_range+.1));_>.001&&(a+=-p*(e.position[0]-d[0])/_,s+=-p*(e.position[1]-d[1])/_)}}catch(w){u.e(w)}finally{u.f()}var m,g=Object(f.a)(this.attractive_points);try{for(g.s();!(m=g.n()).done;){var v=m.value;if(v[2].includes(e.model.current_mode)&&!e.model.exit_lock)((_=M(e.position,v[0]))<v[3]||-1===v[3])&&(c[3]===v[4]||-1===v[4])&&x("Infected"==e.className,e.model.stay_at_home)&&(r+=-v[1]*(e.position[0]-v[0][0])/_,o+=-v[1]*(e.position[1]-v[0][1])/_)}}catch(w){g.e(w)}finally{g.f()}0===r&&0===o&&((_=M(e.position,c[2]))>.001&&(r=-this.home_multiplier*(e.position[0]-c[2][0])/_,o=-this.home_multiplier*(e.position[1]-c[2][1])/_));e.model.stronger_repulsion&&(n+=n);var y=i*r-n*a,b=i*o-n*s;return[y,b]}},{key:"reset_linked_cell",value:function(e){var t=this;this.lc=Object(o.a)(Array(Math.floor(this.height/e)+1)).map((function(i){return Array(Math.floor(t.width/e)+1).fill(-1)})),this.current_range=e,this.ll.splice(0,this.ll.length),this.ll[0]=[-1,-1,[0,0]]}},{key:"update_linked_cell",value:function(e){this.reset_linked_cell(e);var t,i=0,n=Object(f.a)(this.agent_list);try{for(n.s();!(t=n.n()).done;){var a=t.value,s=Math.floor(a[1][0]/e),r=Math.floor(a[1][1]/e);this.ll[i]=[this.lc[s][r],a[0],a[1]],this.lc[s][r]=i,i++}}catch(o){n.e(o)}finally{n.f()}}},{key:"uids_in_cell_linked_cell",value:function(e,t){var i,n=new Array;for(i=this.lc[e][t];-1!=this.ll[i][0];)n.push(this.ll[i][1]),i=this.ll[i][0];return n}},{key:"inRange_linked_cell",value:function(e,t,i){var n,a,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=Math.floor(e[0]/i),a=Math.floor(e[1]/i);var r,o=new Array;if((r=this.lc[n][a])>=0)for(;-1!=this.ll[r][0];)t!=this.ll[r][1]&&(s?o.push([this.ll[r][1],this.ll[r][2]]):o.push(this.ll[r][1])),r=this.ll[r][0];return o}},{key:"inRange_all_uids_linked_cell",value:function(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Math.floor(e[0]/t),s=Math.floor(e[1]/t),r=new Array;for(i=this.lc[a][s];-1!=this.ll[i][0];)n?r.push([this.ll[i][1],this.ll[i][2]]):r.push(this.ll[i][1]),i=this.ll[i][0];return r}},{key:"add_agent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.agent_list.push([e.unique_id,e.position,t,i])}},{key:"get_agent_attributes",value:function(e){return this.agent_list.filter((function(t,i,n){return t[0]==e.unique_id}))}},{key:"remove_agent",value:function(e){if("undefined"!==e.unique_id){var t=this.agent_list.filter((function(t,i,n){return t[0]!=e.unique_id}));t.length==this.agent_list.length-1?this.agent_list=t:console.log("Error removing agent from world. UID not valid")}else console.log("Error setting up new agents")}},{key:"get_random_position_empty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;do{var t,i=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.height),a=this.agent_list.filter((function(e){return M(e[1],[i,n]<.5)})),s=!0,r=Object(f.a)(this.attractive_points);try{for(r.s();!(t=r.n()).done;){var o=t.value;M(o[0],[i,n])<=e&&(s=!1)}}catch(l){r.e(l)}finally{r.f()}}while(0!=a.length||0==s);return[i,n]}},{key:"correct_boundaries",value:function(e){return e[0]<0?e[0]=0:e[0]>this.width-1&&(e[0]=this.width-1),e[1]<0?e[1]=0:e[1]>this.height-1&&(e[1]=this.height-1),e}},{key:"get_agents_inRange",value:function(e,t){var i,n=new Array,a=this.inRange_linked_cell(e.position,e.unique_id,e.model.repulsion_range,!0),s=Object(f.a)(a);try{for(s.s();!(i=s.n()).done;){var r=i.value;M(e.position,r[1])<t&&n.push(r[0])}}catch(o){s.e(o)}finally{s.f()}return n}},{key:"move_agent",value:function(e,t){var i=this.agent_list.findIndex((function(t){return t[0]==e.unique_id}));this.agent_list[i].length?this.agent_list[i][1]=t:console.log("Error moving agent")}}]),e}();function M(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function x(e,t){return!(e&&t)}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.8,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:400,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Object(_.a)(this,e),this.population=t,this.initial_infected=i,this.infection_radius=n,this.infection_probability_onContact=a,this.duration_mean=s,this.infection_recoginition_probability=r,this.max_step=o,this.repulsion_range=5,this.steps_till_symptoms=60,this.width=50,this.height=50,this.stay_at_home=l,this.stronger_repulsion=h,this.exit_lock=c,this.steps_each_day=70,this.step_num=0,this.day=0,this.current_mode="night",this.schedule={night:9,morning:19,work:44,afterwork:58,evening:69},this.schedule_random_activity={night:.2,morning:1.5,work:.2,afterwork:1,evening:.5},this.schedule_speed={night:.75,morning:1.5,work:2,afterwork:1.75,evening:1.25}}return Object(p.a)(e,[{key:"reset",value:function(){"undefined"!==typeof this.s_list&&delete this.s_list,"undefined"!==typeof this.r_list&&delete this.r_list,"undefined"!==typeof this.i_list&&delete this.i_list,"undefined"!==typeof this.space&&delete this.space}},{key:"initialize",value:function(){var e;this.infection_radius>this.repulsion_range&&(console.log("Error: Infection range has to be smaller or equal to repulsion range. Set to repulsion range"),this.infection_radius=this.repulsion_range),this.s_list=[],this.r_list=[],this.i_list=[],this.old_R=new Array,this.old_R.push(0),this.old_I=new Array,this.old_I.push(this.initial_infected),this.old_S=new Array,this.old_S.push(this.population-this.initial_infected),this.R_array=new Array,this.space=new O(this.width,this.height),this.day=0,this.step_num=0,this.current_mode="night";var t,i=Object(f.a)(R(1,this.population-this.initial_infected));try{for(i.s();!(t=i.n()).done;){e=t.value;var n=this.space.get_random_position_empty(8),a=new b(e,n,this,!1,n);this.s_list.push(a),this.space.add_agent(a,n,q(1,3))}}catch(l){i.e(l)}finally{i.f()}var s,r=Object(f.a)(R(e+1,e+this.initial_infected));try{for(r.s();!(s=r.n()).done;){var o=s.value;n=this.space.get_random_position_empty(8),a=new j(o,n,this,!1,n),this.i_list.push(a),this.space.add_agent(a,a.home,q(1,3))}}catch(l){r.e(l)}finally{r.f()}}},{key:"set_stay_at_home",value:function(e){this.stay_at_home=e}},{key:"set_exit_lock",value:function(e){this.exit_lock=e}},{key:"set_stronger_repulsion",value:function(e){this.stronger_repulsion=e}},{key:"set_spread_probability",value:function(e){this.infection_probability_onContact=e}},{key:"move_to_r",value:function(e,t){var i,n,a=Object(f.a)(e);try{for(a.s();!(n=a.n()).done;){if(i=n.value,"s"==t){var s=this.s_list.filter((function(e,t,n){return e.unique_id===i}))[0];this.s_list=this.s_list.filter((function(e,t,n){return e.unique_id!==i})),this.space.remove_agent(s)}else if("i"==t){s=this.i_list.filter((function(e,t,n){return e.unique_id===i}))[0];this.i_list=this.i_list.filter((function(e,t,n){return e.unique_id!==i})),this.space.remove_agent(s)}else console.log("Error switching class to Removed");var r=new k(s.unique_id,s.position,this,s.now_in_center,s.home);r.has_infected=s.has_infected,this.r_list.push(r),this.space.add_agent(r,r.home,q(1,3))}}catch(o){a.e(o)}finally{a.f()}}},{key:"move_to_i",value:function(e){var t,i,n=Object(f.a)(e);try{for(n.s();!(i=n.n()).done;){t=i.value;var a=this.s_list.filter((function(e,i,n){return e.unique_id===t}))[0];this.s_list=this.s_list.filter((function(e,i,n){return e.unique_id!==t}));var s=this.space.get_agent_attributes(a);this.space.remove_agent(a);var r=new j(a.unique_id,a.position,this,a.now_in_center,a.home,a.steps_since_infection);r.has_infected=a.has_infected,this.i_list.push(r),this.space.add_agent(r,r.home,s[0][3])}}catch(o){n.e(o)}finally{n.f()}}},{key:"step_s",value:function(){var e=[],t=[];for(var i in this.s_list){var n=this.s_list[i].step(),a=Object(h.a)(n,2),s=a[0],r=a[1];s>=0?e.push(s):r>=0&&t.push(r)}e.length>0?this.move_to_r(e,"s"):t.length>0&&this.move_to_i(t);var o=this.s_list.filter((function(e){return!e.infected}));return[o.length,this.s_list.length-o.length]}},{key:"step_i",value:function(){var e=[];for(var t in this.i_list){var i=this.i_list[t].step();i>=0&&e.push(i)}return e.length>0&&this.move_to_r(e,"i"),this.i_list.length}},{key:"step_r",value:function(){for(var e in this.r_list)this.r_list[e].step();return this.r_list.length}},{key:"calculate_R0",value:function(e,t,i){var n=this.old_R.slice(-this.steps_each_day),a=n.reduce((function(e,t){return e+t}),0),s=(this.steps_each_day*i-a)/n.length||0,r=this.old_I.slice(-this.steps_each_day),o=r.reduce((function(e,t){return e+t}),0),l=(this.steps_each_day*t-o)/r.length||0,h=s/t+.01;this.old_R.push(i),this.old_S.push(e),this.old_I.push(t);var c=(l/(h*t)+1)*this.population/e;return this.day>=1?(console.log("R0:"+c),c):0}},{key:"calculate_mode",value:function(){var e,t=this.step_num%this.steps_each_day;return t<=this.schedule.night?e="night":t>this.schedule.night&&t<=this.schedule.morning?e="morning":t>this.schedule.morning&&t<=this.schedule.work?e="work":t>this.schedule.work&&t<=this.schedule.afterwork?e="afterwork":t>this.schedule.afterwork&&t<=this.schedule.evening&&(e="evening"),e}},{key:"step",value:function(){this.space.update_linked_cell(this.repulsion_range),this.current_mode=this.calculate_mode();var e=this.step_s(),t=this.step_i(),i=this.step_r(),n=this.calculate_R0(e[0],t+e[1],i);return this.R_array.push(n),console.log("Day: "+this.day),console.log("Mode: "+this.current_mode),console.log("Step - day-cycle: "+this.step_num%this.steps_each_day),this.step_num+=1,this.day=Math.floor(this.step_num/this.steps_each_day),t+e[1]==0}},{key:"run",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,i,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reset(),this.initialize(),t=Object(f.a)(R(1,this.max_step)),e.prev=3,t.s();case 5:if((i=t.n()).done){e.next=16;break}if(n=i.value,console.log("Step: "+n),!this.step()){e.next=12;break}return console.log("Reached end of Simulation after "+n+"steps."),e.abrupt("break",16);case 12:return e.next=14,C(200);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),t.e(e.t0);case 21:return e.prev=21,t.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[3,18,21,24]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function R(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i}function C(e){return new Promise((function(t){return setTimeout(t,e)}))}function q(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var I,A,D,P,z,T,B,F,N,L=i(271),H=i(274),W=i(264),U=i(114),G=i(265),J=i(263),Y=i(272),$=i(266),K=i(273),Q=i(267),V=i(268),X=i(269),Z=i(15),ee=i(101),te=i.n(ee),ie=i(102),ne=i.n(ie),ae=i(103),se=i.n(ae),re=i(104),oe=i.n(re),le=i(64),he={},ce=0,ue=a.a.memo((function(e){var t=e.worldState,i=e.worldWidth,s=e.worldHeight,r=e.currentWidth,o=e.currentHeight,l=e.stepDuration,h=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(o&&r&&!z){B=o/r,z=new Z.a({width:600,height:600,transparent:!0}),T=new Z.b,z.stage.addChild(T),h.current.appendChild(z.view);var e=new Z.c;e.beginFill(0),e.lineStyle(0),e.drawCircle(600/i,600/s,Math.min(600/i,600/s)),e.endFill(),I=z.renderer.generateTexture(e),(e=new Z.c).beginFill(16711680),e.lineStyle(0),e.drawCircle(600/i,600/s,Math.min(600/i,600/s)),e.endFill(),A=z.renderer.generateTexture(e),(e=new Z.c).beginFill(255),e.lineStyle(0),e.drawCircle(600/i,600/s,Math.min(600/i,600/s)),e.endFill(),D=z.renderer.generateTexture(e),(e=new Z.c).beginFill(65280),e.lineStyle(0),e.drawCircle(600/i,600/s,Math.min(600/i,600/s)),e.endFill(),P=z.renderer.generateTexture(e)}var t,n;z&&o&&r&&(o/r>=B?(t=r*B,n=o):(t=r,n=o/B),z.renderer.view.style.width=t+"px",z.renderer.view.style.height=n+"px")}),[o,r]),Object(n.useEffect)((function(){z&&T&&s&&i&&l&&!isNaN(600)&&(z.ticker.remove(N),N=function(e){ce+=e/Z.h.TARGET_FPMS/1e3,Object.keys(he).forEach((function(e){var t=he[e];t.sprite.x=t.oldPos[0]*(600/i)+(t.agent.position[0]*(600/i)-t.oldPos[0]*(600/i))*Math.min(ce/l,1),t.sprite.y=t.oldPos[1]*(600/s)+(t.agent.position[1]*(600/s)-t.oldPos[1]*(600/s))*Math.min(ce/l,1)}))},z.ticker.add(N))}),[z,T,s,i,l]),Object(n.useEffect)((function(){z&&T&&t.hotSpots&&t.hotSpots.forEach((function(e){var t;if(e.group<0&&("default"===e.tag||"park"===e.tag)){var n=new Z.c;n.beginFill(65535,.2),n.lineStyle(0),n.drawCircle(600*e.strength,600*e.strength,Math.min(600*e.strength,600*e.strength)),n.endFill(),t=z.renderer.generateTexture(n);var a=e.range/i}else if(1==e.group&&"default"===e.tag){t=Z.f.from(te.a);a=.2*e.strength}else if(2==e.group&&"default"===e.tag){t=Z.f.from(ne.a);a=.2*e.strength}else if(3==e.group&&"default"===e.tag){t=Z.f.from(se.a);a=.2*e.strength}var r=new Z.d(t);if(r.x=e.pos[0]*(600/i)-600*a/2,r.y=e.pos[1]*(600/s)-600*a/2,r.width=600*a,r.height=600*a,T.addChild(r),"park"===e.tag){t=Z.f.from(oe.a);a=.2*e.strength;var o=new Z.d(t);o.x=e.pos[0]*(600/i)-600*a/2,o.y=e.pos[1]*(600/s)-600*a/2,o.width=600*a,o.height=600*a,T.addChild(o)}}))}),[z,T]),Object.keys(he).forEach((function(e){var i=t.agentList.findIndex((function(t){return t.unique_id==e}));-1===i?(T.removeChild(he[e].sprite),delete he[e]):(he[e].oldPos=he[e].agent.position,he[e].oldState=he[e].agent.state,he[e].agent=t.agentList[i])})),z&&T&&t&&t.agentList.forEach((function(e){var t,n;e.unique_id in he?t=he[e.unique_id].sprite:((t=new Z.d(I)).width=600/i,t.height=600/s,T.addChild(t),he[e.unique_id]={text:n,sprite:t,agent:e,oldPos:e.position,oldState:e.state}),"infected"==e.state?(t.texture=A,"infected"!==he[e.unique_id].oldState?t.filters=[new le.a({distance:15,outerStrength:2,color:16711680})]:t.filters=[]):"infected_unrecognized"==e.state?(t.texture=D,"infected_unrecognized"!==he[e.unique_id].oldState?t.filters=[new le.a({distance:15,outerStrength:2,color:255})]:t.filters=[]):"recovered"==e.state?(t.texture=P,"recovered"!==he[e.unique_id].oldState?t.filters=[new le.a({distance:15,outerStrength:2,color:65280})]:t.filters=[]):"susceptible"==e.state&&(t.texture=I)})),!z||"stopped"!=t.state&&"paused"!=t.state?z&&T&&(T.filters=[],z.stage.removeChild(F)):(z.stage.removeChild(F),T.filters=[new Z.g.BlurFilter(12,4,1,5)],(F=new Z.e("The simulation is ".concat(t.state,"."),{fontFamily:"Arial",fontSize:24,fill:0,align:"center"})).x=(600-F.width)/2,F.y=(600-F.height)/2,z.stage.addChild(F),F.filters=[]),ce=0,a.a.createElement("div",{ref:h})})),de=i(109),fe=i.n(de),_e=i(108),pe=i.n(_e),me=a.a.memo((function(e){var t=e.time,i=e.mode,n=e.day,s=void 0===n?0:n,r=(e.R,"night"===i||"evening"===i);return a.a.createElement(J.a,null,a.a.createElement(L.a,{display:"flex",direction:"column",alignItems:"center",justify:"center"},a.a.createElement(U.a,{variant:"overline"},"Day: ",s)),a.a.createElement(L.a,{display:"flex",direction:"column",alignItems:"center",justify:"center",p:2},r&&a.a.createElement(pe.a,null),!r&&a.a.createElement(fe.a,null),"\xa0\xa0",a.a.createElement(U.a,{variant:"overline"},t)))})),ge=i(110),ve=a.a.memo((function(e){var t=e.height,i=e.width,n=e.chartData,s=e.chartRef;return n&&a.a.createElement(ge.a,{ref:s,data:n,height:t,width:i,showTooltips:!1,options:{maintainAspectRatio:!1,responsive:!1,elements:{point:{radius:0}}}})})),ye=i(112),be=i(113),we=null,ke=null,je=[];var Ee=function(){be.a.initialize("UA-161194303-3");var e=Object(n.useState)({agentList:[],hotSpots:[],chartData:{labels:[],datasets:[]},time:"00:00",dayPhase:"day",state:"stopped",day:0,R:1}),t=Object(h.a)(e,2),i=t[0],s=t[1],r=Object(n.useState)(void 0),c=Object(h.a)(r,2),u=c[0],d=c[1],f=Object(n.useState)(void 0),_=Object(h.a)(f,2),p=_[0],m=_[1],g=Object(n.useState)("stopped"),v=Object(h.a)(g,2),y=(v[0],v[1],Object(n.useState)(3)),b=Object(h.a)(y,2),w=b[0],k=b[1],j=Object(n.useState)(100),E=Object(h.a)(j,2),O=E[0],M=E[1],x=Object(n.useState)(.5),R=Object(h.a)(x,2),C=R[0],q=R[1],I=Object(n.useState)(2),A=Object(h.a)(I,2),D=A[0],P=A[1],z=Object(n.useState)(.01),T=Object(h.a)(z,2),B=T[0],F=T[1],N=Object(n.useState)(!1),Z=Object(h.a)(N,2),ee=Z[0],te=Z[1],ie=Object(n.useState)(!1),ne=Object(h.a)(ie,2),ae=ne[0],se=ne[1],re=Object(n.useState)(!1),oe=Object(h.a)(re,2),le=oe[0],he=oe[1],ce=Object(n.useState)(5),de=Object(h.a)(ce,2),fe=de[0],_e=de[1],pe=Object(n.useState)("unrestricted"),ge=Object(h.a)(pe,2),Ee=(ge[0],ge[1],Object(n.useState)(.3)),Oe=Object(h.a)(Ee,2),Me=Oe[0],xe=Oe[1],Se=Object(n.useRef)(null);return Object(n.useEffect)((function(){(ke=new S(O,w,D,B,20,C,999999999999,ae,ee,le)).reset(),ke.initialize(),m(ke.height),d(ke.width)}),[]),Object(n.useEffect)((function(){var e=Object(l.a)({},i),t=ke.space.attractive_points.map((function(e){return{pos:e[0],strength:e[1],range:e[3],group:e[4],tag:e[5]}}));e.hotSpots=t,s(e)}),[ke]),Object(n.useEffect)((function(){clearInterval(we),"running"===i.state?we=setInterval((function(){var e=Object(l.a)({},i),t=0,n=0,a=0,r=0,h=ke.step(),c=ke.step_num%ke.steps_each_day*(24/ke.steps_each_day),u=new Date;u.setSeconds(0),u.setMinutes(c%1*60),u.setHours(c),e.time=u.toLocaleTimeString("en-US"),e.dayPhase=ke.current_mode,e.day=ke.day,e.R=ke.R_array[-1];var d=[],f=ke.s_list.map((function(e){return!0===e.infected?(e.state="infected_unrecognized",n+=1):(e.state="susceptible",a+=1),Object.assign({},e)}));d.push.apply(d,Object(o.a)(f));var _=ke.i_list.map((function(e){return e.state="infected",t+=1,Object.assign({},e)}));d.push.apply(d,Object(o.a)(_));var p=ke.r_list.map((function(e){return e.state="recovered",r+=1,Object.assign({},e)}));d.push.apply(d,Object(o.a)(p)),e.agentList=d,h&&(clearInterval(we),e.state="stopped");var m={infected:t,infectedUnrecognized:n,recovered:r,susceptible:a},g=Object(o.a)(je);g.push(m),je=g;var v=[],y={label:"Susceptible",fill:!0,lineTension:.1,borderColor:"rgba(0,0,0,1)",data:[]},b={label:"Infected",fill:!0,lineTension:.1,borderColor:"rgba(255,0,0,1)",data:[]},w={label:"All Infected",fill:!0,lineTension:.1,borderColor:"rgba(255,0,0,0.4)",data:[]},k={label:"Recovered",fill:!0,lineTension:.1,borderColor:"rgba(0,255,0,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,data:[]};g.forEach((function(e,t){y.data.push(e.susceptible),b.data.push(e.infected),k.data.push(e.recovered),w.data.push(e.infected+e.infectedUnrecognized),v.push(t)}));var j={labels:v,datasets:[b,k,y,w]};e.chartData=j,s(e)}),1e3*Me):clearInterval(we)}),[i.state,Me]),a.a.createElement(L.a,{display:"flex",flexDirection:"column",className:"App",height:"100%"},a.a.createElement(H.a,{position:"static"},a.a.createElement(W.a,null,a.a.createElement(U.a,{variant:"h6"},"SIR Playground"))),a.a.createElement(L.a,{mt:2,mb:2,flexGrow:1,overflow:"hidden"},a.a.createElement(G.a,{style:{height:"100%"}},a.a.createElement(L.a,{height:"95%"},a.a.createElement(J.a,{container:!0,spacing:2,style:{height:"100%"}},a.a.createElement(J.a,{item:!0,xs:4,height:"100%"},a.a.createElement(L.a,{p:2},a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Initial Infected"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,value:w,onChange:function(e,t){k(t)}}),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Population"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:25,marks:!0,min:25,max:500,value:O,onChange:function(e,t){M(t)}}),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Probability Recognized"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:.1,marks:!0,min:0,max:1,value:C,onChange:function(e,t){q(t)}}),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Infection Radius"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:1,marks:!0,min:2,max:4,value:D,onChange:function(e,t){P(t)}}),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Mean Infection Duration"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:1,marks:!0,min:3,max:8,value:fe,onChange:function(e,t){_e(t)}}),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Spread Probability"),a.a.createElement("br",null),a.a.createElement($.a,{control:a.a.createElement(K.a,{checked:B>=.1,onChange:function(e){e.target.checked?(F(.1),ke.set_spread_probability(.1)):(F(.01),ke.set_spread_probability(.01))}}),label:"Increased Probability"}),a.a.createElement("br",null),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Social distancing"),a.a.createElement("br",null),a.a.createElement($.a,{control:a.a.createElement(K.a,{checked:ee,onChange:function(e){e.target.checked?(te(!0),ke.set_stronger_repulsion(!0)):(te(!1),ke.set_stronger_repulsion(!1))}}),label:"Try to hold distance"}),a.a.createElement("br",null),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Stay at home"),a.a.createElement("br",null),a.a.createElement($.a,{control:a.a.createElement(K.a,{checked:ae,onChange:function(e){e.target.checked?(se(!0),ke.set_stay_at_home(!0)):(se(!1),ke.set_stay_at_home(!1))}}),label:"Infected"}),a.a.createElement("br",null),a.a.createElement($.a,{control:a.a.createElement(K.a,{checked:le,onChange:function(e){e.target.checked?(he(!0),se(!0),ke.set_stay_at_home(!0),ke.set_exit_lock(!0)):(he(!1),se(!1),ke.set_stay_at_home(!1),ke.set_exit_lock(!1))}}),label:"Everybody"}),a.a.createElement("br",null),a.a.createElement(L.a,{mt:2,mb:2},a.a.createElement(Q.a,null)),a.a.createElement(U.a,{variant:"overline",gutterBottom:!0},"Step Period (s)"),a.a.createElement(Y.a,{valueLabelDisplay:"auto",step:.1,marks:!0,min:.1,max:2,value:Me,onChange:function(e,t){xe(t)}}),a.a.createElement(L.a,{mt:2},a.a.createElement(V.a,{color:"primary",variant:"contained",size:"large",onClick:function(){var e=Object(l.a)({},i);"running"==i.state?(e.state="paused",clearInterval(we)):("stopped"==i.state&&((ke=new S(O,w,D,B,fe,C,999999999999,ae,ee,le)).reset(),ke.initialize(),m(ke.height),d(ke.width)),e.state="running"),s(e)}},"running"===i.state?"Pause":"Start"),"\xa0\xa0",a.a.createElement(V.a,{color:"primary",variant:"contained",size:"large",onClick:function(){var e=Object(l.a)({},i);je=[],e.state="stopped",s(e)}},"Reset")))),a.a.createElement(J.a,{item:!0,xs:6},a.a.createElement(ye.SizeMe,{monitorHeight:!0},(function(e){var t=e.size,n=Math.min(t.width,.7*t.height);return a.a.createElement(L.a,{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},a.a.createElement(ue,{worldState:i,worldWidth:u,worldHeight:p,currentWidth:n,currentHeight:n,stepDuration:Me}),!isNaN(t.height)&&!isNaN(t.width)&&i.chartData&&a.a.createElement(ve,{height:t.height-n-10,width:t.width,chartData:i.chartData,chartRef:Se}))}))),a.a.createElement(J.a,{item:!0,xs:2},a.a.createElement(me,{time:i.time,mode:i.dayPhase,day:i.day,R:i.R})))),a.a.createElement(L.a,{height:"5%",display:"flex",justifyContent:"center"},a.a.createElement(U.a,{variant:"caption"},"SIR-Playground created by ",a.a.createElement(X.a,{href:"https://github.com/SYoy"},"SYoy")," and ",a.a.createElement(X.a,{href:"https://github.com/dani2112"},"dani2112"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.6c43511b.chunk.js.map